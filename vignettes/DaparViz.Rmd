---
title: "DaparViz user manual"
author: 
- name: Samuel Wieczorek
- name: Thomas Burger
package: DaparViz
abstract: >
    The package DaparViz is a R package which provides functions to vizualize quantitative data from label-free proteomics experiments. It can deal with several data formats such as MSnSet, QFeatures or event simple lists. This document covers the functionalities available in `r BiocStyle::pkg_ver('DaparViz')`.
date: "`r Sys.Date()`"
output:
    BiocStyle::html_document:
        highlight: tango
        number_sections: yes
        toc: true
        toc_depth: 2
vignette: >
    %\VignetteIndexEntry{DaparViz user Manual}
    %\VignetteEngine{knitr::rmarkdown}
    %%\VignetteKeywords{Softmware, Mass Spectrometry, Quantitative }
    %\VignetteEncoding{UTF-8}
---

\newcommand{\shellcmd}[1]{\\\indent\indent\texttt{\footnotesize\# #1}}

\newcommand{\Rcmd}[1]{\\\indent\indent\texttt{\footnotesize\# #1}}

\newcommand{\bordurefigure}[1]{\fbox{\includegraphics{#1}}}



# Introduction

The `DaparViz` package is a Shiny app which is a standalone hub for plots
dedicated to the analysis of proteomics data. It can deal with two data 
formats: `MSnSet` and `QFeatures`. It has a series of built-in plots and can
integrate og=ther shiny apps

It has been developed as a Shiny module so as to be flexible: it can run standalone- or can be inserted in another Shiny app.
In that sense, it can be used on its own; or as a complement to the numerous 
Bioconductor packages (\url{https://www.bioconductor.org/}) it is compliant with; or through the `Prostar` interface.

`Prostar` (Proteomics statistical analysis with R) is a 
web interface based on Shiny technology (\url{http://shiny.rstudio.com/}) that provides GUI (Graphical User Interfaces).
The experiment package `DaparToolshedData` contains many datasets that can be used as examples.
`DaparViz` contains built-in plots but have the capability to show plots developped by other developper (as a Shiny app).


# Installation

To install this package, start R (version "4.3") and enter:

```
if (!require("BiocManager", quietly = TRUE))
    install.packages("BiocManager")

BiocManager::install("DaparViz")
```

For older versions of R, please refer to the appropriate Bioconductor release.



# DaparViz data format

`DaparViz` has its own data format (the DaparViz-class) which is a 
simplification of the formats it can deal with. 
To see which data formats `DaparViz` can manage, run 

```

```

To see how to convert other data formats to DaparViz-class, run ?DaparViz-class
```

```

However, `DaparViz` plot functions integrate a convert feature so as to pass
directly datasets in other format to the plot functions.



# Using DaparViz

The functions in DaparViz use a specific data format which is described in the following section.

DaparViz is a collection of standard plots which are available as Shiny applications. Thus, each plot has its own application.

The main feature in DaparViz is a Shiny app which combine all the different Shiny app.

## Main UI

The Shiny app called view_dataset() is the main application of the package
`DaparViz`. It can be lauched as follows2:


```
library(DaparViz)
data(vData_ft)
view_dataset(vData_ft)
```

It is composed of two parts :
* a selection widget to select the dataset to show in the plots,
* a graphical part with clickable vignettes which represent the plots 
available. When the user clicks on one of those vignettes, the corresponding plot is showed below.

When a plot is displayed, it shows the data corresponding to the dataset selected in the widget. If this dataset is changed, the plot update automatically to the new dataset.


The list of vignettes is composed of :
* built-in shiny apps in the package `DaparViz`. See details with `listPlotsModules()`.
* external apps which are exported by other packages. For more details on the
development of an external app, see section xxx.






## Individual plots

Each of the built-in plots can be run in a standalone mode rather than embedded in the main UI.

It is possible simply by running its name. The list of all shiny apps which are 
available via DaparViz can be seen using

```
# Get all the shiny apps which are avaialbie in the main UI
listShinyApps()
```
See the help page of this function fore more details.


```
library(DaparViz)
data(vData_ft)
obj <- vData_ft[[1]]
listPlotModules()
ds_pca(obj)
ds_density(obj)

```

# Adding external plots

DaparViz can plot builtin plots as external shiny app. For that purpose, there are 
only two points to consider:
* make a shiny app available in the global R environment
* ensure that the name of the two functions `ui()` and `server()` of the app 
respect a predefined syntax. More specifically, the name of the shiny app is 
composed by the prefix 'mod_ds_' (which stands for 'descriptive statistics') and 
a user-defined name. As for each Shiny app, there must be two functions (one 
for the ui part and the second one for the server part.).
Thus, in this example, the shiny app called `foo` must provide the functions 
`foo_ui()` and `foo_server()`. 


The use of those external apps is devoted to its developer, the interface of 
DaparViz is only a shell that presents apps in a user-friendly interface.

To add external app to DaparViz, please use the global function `view_dataset()`
as follows. In the example below, one want to add the app called `extFoo1` and `extFoo2`
from the package `DaparViz`. It is only for the example, this app contains a 
simple plot just to demonstrate how it works

```
library(DaparViz)
data(vData_ft)

addons <- list(DaparViz = c('extFoo1', 'extFoo2'))
view_dataset(vData_ft, addons)
```

## Technical point of view



# Session information

```{r}
sessionInfo()
```
